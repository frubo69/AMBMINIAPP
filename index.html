<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>AMBAR</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root{
  --gold:#C9A96E;--gold2:#E8C98A;--gold3:#F5E0B0;
  --bg:#07070E;--bg2:#0C0C18;--bg3:#111120;
  --card:#121224;--card2:#161628;
  --border:rgba(201,169,110,.16);--border2:rgba(255,255,255,.06);
  --text:#EDE9E0;--sub:#9896AA;--muted:#54526A;
  --red:#E05555;--green:#4CAF7D;
  --r:16px;--r2:12px;--r3:10px;
  --safe-bottom:env(safe-area-inset-bottom,0px);
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:antialiased}
html,body{background:var(--bg);color:var(--text);font-family:'Outfit',sans-serif;height:100%;overflow:hidden}
button,input{font-family:'Outfit',sans-serif;outline:none}
img{display:block}
.page{position:fixed;inset:0;bottom:calc(60px + var(--safe-bottom));overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;opacity:1;transition:opacity .2s,transform .2s}
.page.hidden{opacity:0;pointer-events:none;transform:translateY(8px)}
.hdr{position:sticky;top:0;z-index:40;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:rgba(7,7,14,.96);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);flex-shrink:0}
.logo{font-family:'Cormorant Garamond',serif;font-size:22px;font-weight:700;letter-spacing:7px;background:linear-gradient(135deg,var(--gold),var(--gold2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.logo-sub{font-size:7px;letter-spacing:3px;text-transform:uppercase;color:var(--muted);margin-top:-2px}
.hdr-right{display:flex;gap:8px;align-items:center}
.cart-pill{display:flex;align-items:center;gap:6px;background:var(--card2);border:1px solid var(--border);border-radius:50px;padding:7px 13px;position:relative;cursor:pointer;transition:.15s}
.cart-pill:active{transform:scale(.93)}
.cart-txt{font-size:13px;font-weight:600;color:var(--gold2)}
.cart-dot{position:absolute;top:-5px;right:-5px;background:linear-gradient(135deg,var(--gold),var(--gold2));color:#07070E;border-radius:50%;width:18px;height:18px;font-size:9px;font-weight:700;display:none;align-items:center;justify-content:center;border:2px solid var(--bg)}
.lang-btn{width:34px;height:34px;border-radius:50%;border:1px solid var(--border2);background:var(--card2);display:flex;align-items:center;justify-content:center;font-size:15px;cursor:pointer;transition:.15s}
.lang-btn:active{transform:scale(.85)}

/* Active address pill on catalog */
.addr-pill{display:flex;align-items:center;gap:7px;background:var(--bg3);border:1px solid var(--border2);border-radius:50px;padding:6px 12px;cursor:pointer;transition:.15s;max-width:200px}
.addr-pill:active{border-color:var(--gold)}
.addr-pill-txt{font-size:11px;font-weight:500;color:var(--sub);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:140px}
.addr-pill-dot{width:7px;height:7px;border-radius:50%;background:var(--green);flex-shrink:0}

/* Address selector modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:200;display:flex;align-items:flex-end;opacity:0;pointer-events:none;transition:opacity .2s}
.modal-overlay.show{opacity:1;pointer-events:all}
.modal-sheet{width:100%;background:var(--bg2);border-radius:20px 20px 0 0;padding:0 0 calc(16px + var(--safe-bottom));max-height:70vh;overflow-y:auto;transform:translateY(60px);transition:transform .25s cubic-bezier(.34,1,.64,1)}
.modal-overlay.show .modal-sheet{transform:translateY(0)}
.modal-handle{width:36px;height:4px;background:var(--border);border-radius:2px;margin:12px auto 16px}
.modal-title{font-family:'Cormorant Garamond',serif;font-size:18px;color:var(--gold2);padding:0 16px 12px;border-bottom:1px solid var(--border2)}
.modal-addr-item{display:flex;align-items:center;gap:12px;padding:13px 16px;border-bottom:1px solid var(--border2);cursor:pointer;transition:.15s}
.modal-addr-item:active{background:rgba(255,255,255,.03)}
.modal-addr-item.active{background:rgba(201,169,110,.06)}
.mai-icon{font-size:22px;flex-shrink:0}
.mai-info{flex:1;min-width:0}
.mai-label{font-size:13px;font-weight:600;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mai-addr{font-size:11px;color:var(--muted);margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mai-check{color:var(--gold);font-size:18px;flex-shrink:0}
.modal-add-btn{display:flex;align-items:center;gap:10px;padding:14px 16px;cursor:pointer;color:var(--gold);font-size:13px;font-weight:600}

.bnav{position:fixed;bottom:0;left:0;right:0;z-index:40;display:flex;background:rgba(7,7,14,.97);border-top:1px solid var(--border);padding-bottom:var(--safe-bottom)}
.nb{flex:1;display:flex;flex-direction:column;align-items:center;padding:9px 4px 7px;gap:3px;border:none;background:transparent;color:var(--muted);cursor:pointer;transition:.15s}
.nb.on{color:var(--gold)}
.nb i{font-size:20px;line-height:1}
.nb span{font-size:9px;letter-spacing:.5px;font-weight:500}

.chips{display:flex;gap:7px;padding:8px 14px 6px;overflow-x:auto;scrollbar-width:none;flex-shrink:0}
.chips::-webkit-scrollbar{display:none}
.chip{white-space:nowrap;padding:7px 14px;border-radius:50px;border:1px solid var(--border2);background:transparent;color:var(--muted);font-size:11px;font-weight:500;cursor:pointer;transition:.15s}
.chip.on{background:rgba(201,169,110,.1);border-color:var(--gold);color:var(--gold);font-weight:700}
.sec-h{padding:10px 14px 8px;font-family:'Cormorant Garamond',serif;font-size:20px;display:flex;align-items:center;gap:10px;flex-shrink:0}
.sec-h::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--border2),transparent)}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:2px 12px 16px}
@media(min-width:460px){.grid{grid-template-columns:repeat(3,1fr)}}
.pcard{background:var(--card);border:1px solid var(--border2);border-radius:var(--r);overflow:hidden;display:flex;flex-direction:column;transition:.15s}
.pcard:active{transform:scale(.97)}
.pimg-box{height:148px;background:linear-gradient(155deg,#0E0E1E,#090916);display:flex;align-items:center;justify-content:center;padding:10px;position:relative;overflow:hidden}
.pimg{max-height:128px;max-width:90%;object-fit:contain;filter:drop-shadow(0 6px 20px rgba(0,0,0,.7))}
.pbadge{position:absolute;font-size:8px;letter-spacing:1px;text-transform:uppercase;padding:3px 7px;border-radius:6px;font-weight:700}
.pbadge.oos{left:8px;top:8px;background:rgba(0,0,0,.7);border:1px solid var(--border2);color:var(--muted)}
.pbadge.isnew{right:8px;top:8px;background:linear-gradient(135deg,var(--gold),var(--gold2));color:#07070E}
.pinfo{padding:10px 11px 12px;flex:1;display:flex;flex-direction:column;gap:4px}
.pcat{font-size:8px;letter-spacing:2px;text-transform:uppercase;color:var(--gold);font-weight:600}
.pname{font-family:'Cormorant Garamond',serif;font-size:15px;font-weight:600;line-height:1.2}
.pdesc{font-size:10px;color:var(--muted);line-height:1.45;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.pfoot{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:8px}
.pprice{font-size:16px;font-weight:700;color:var(--gold2)}
.pprice small{font-size:9px;color:var(--muted);font-weight:400}
.add-btn{width:32px;height:32px;border-radius:9px;background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;color:#07070E;font-size:22px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.13s}
.add-btn:active{transform:scale(.75)}
.add-btn:disabled{background:var(--card2);color:var(--muted);cursor:not-allowed}
.qctrl{display:flex;align-items:center;gap:5px}
.qb{width:28px;height:28px;border-radius:8px;border:1px solid var(--border);background:var(--bg3);color:var(--gold);font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.12s}
.qb:active{transform:scale(.75)}
.qn{font-size:13px;font-weight:700;min-width:20px;text-align:center;color:var(--gold2)}
.empty{text-align:center;padding:60px 20px;color:var(--muted)}
.empty-icon{font-size:54px;margin-bottom:14px;opacity:.3}
.ci{display:flex;align-items:center;gap:11px;padding:13px 16px;border-bottom:1px solid var(--border2)}
.ci-img{width:50px;height:60px;object-fit:contain;background:var(--card);border-radius:10px;padding:5px;flex-shrink:0}
.ci-info{flex:1;min-width:0}
.ci-name{font-size:13px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ci-price{font-size:12px;color:var(--gold);font-weight:600;margin-top:2px}
.tip-wrap{padding:14px 16px;border-top:1px solid var(--border2)}
.tip-label{font-size:9px;letter-spacing:2.5px;text-transform:uppercase;color:var(--muted);font-weight:600;margin-bottom:10px}
.tip-row{display:flex;flex-wrap:wrap;gap:7px}
.tip-chip{padding:8px 14px;border-radius:50px;border:1px solid var(--border2);background:transparent;color:var(--sub);font-size:12px;font-weight:500;cursor:pointer;transition:.15s}
.tip-chip.on{background:rgba(201,169,110,.1);border-color:var(--gold);color:var(--gold);font-weight:700}
.tip-input{width:100%;margin-top:10px;background:var(--bg3);border:1.5px solid var(--border2);border-radius:var(--r3);padding:11px 14px;color:var(--text);font-size:14px;display:none;transition:.2s}
.tip-input:focus{border-color:var(--gold)}
.cart-foot{padding:14px 16px;background:var(--bg2);border-top:1px solid var(--border)}
.total-row{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:12px}
.total-lbl{font-size:9px;letter-spacing:2.5px;text-transform:uppercase;color:var(--muted);font-weight:600}
.total-val{font-family:'Cormorant Garamond',serif;font-size:28px;color:var(--gold2);font-weight:600}
.btn-main{width:100%;background:linear-gradient(135deg,var(--gold),var(--gold2),var(--gold3));color:#07070E;border:none;border-radius:14px;padding:15px;font-size:15px;font-weight:700;cursor:pointer;letter-spacing:.3px;transition:.15s}
.btn-main:active{transform:scale(.98);opacity:.9}
.btn-main:disabled{opacity:.3;cursor:not-allowed}
.btn-outline{width:100%;background:transparent;border:1.5px solid var(--border);color:var(--sub);border-radius:14px;padding:13px;font-size:14px;font-weight:500;cursor:pointer;margin-top:8px;transition:.15s}
.btn-outline:active{border-color:var(--gold);color:var(--gold)}

/* Cart active address banner */
.cart-addr-bar{margin:12px 16px 0;background:var(--card);border:1px solid var(--border2);border-radius:var(--r2);padding:11px 14px;display:flex;align-items:center;gap:10px;cursor:pointer}
.cart-addr-bar:active{border-color:var(--gold)}
.cab-icon{font-size:18px;flex-shrink:0}
.cab-info{flex:1;min-width:0}
.cab-label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;font-weight:600}
.cab-addr{font-size:13px;font-weight:600;color:var(--text);margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.cab-change{font-size:11px;color:var(--gold);font-weight:600;flex-shrink:0}

/* ADDRESS PAGE */
.addr-page-body{padding:14px 16px}
.addr-form-card{background:var(--card);border:1px solid var(--border2);border-radius:var(--r);overflow:hidden;margin-bottom:14px}
.addr-form-head{padding:13px 15px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border2)}
.addr-form-title{font-size:14px;font-weight:600}
.addr-form-body{padding:14px 15px}
.flabel{display:block;font-size:9px;letter-spacing:2.5px;text-transform:uppercase;color:var(--muted);margin-bottom:7px;font-weight:600}
.finput{width:100%;background:var(--bg3);border:1.5px solid var(--border2);border-radius:var(--r3);padding:12px 14px;color:var(--text);font-size:14px;transition:.2s}
.finput:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(201,169,110,.07)}
.finput::placeholder{color:var(--muted)}
.finput.err{border-color:var(--red)!important}
.ferr{font-size:11px;color:var(--red);margin-top:6px;display:none}
.ferr.on{display:block}

/* Method tabs */
.mtabs{display:flex;gap:8px;margin-bottom:14px}
.mtab{flex:1;padding:10px 6px;background:var(--bg3);border:1.5px solid var(--border2);border-radius:var(--r2);cursor:pointer;color:var(--muted);font-size:11px;font-weight:600;text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px;transition:.15s}
.mtab i{font-size:20px}
.mtab.on{border-color:var(--gold);background:rgba(201,169,110,.08);color:var(--gold)}
.mtab:active{transform:scale(.95)}
.mpanel{display:none}
.mpanel.show{display:block}
.gps-btn{display:flex;align-items:center;gap:10px;width:100%;background:rgba(201,169,110,.07);border:1.5px solid rgba(201,169,110,.25);border-radius:var(--r2);padding:14px 15px;cursor:pointer;color:var(--gold);font-size:13px;font-weight:600;transition:.2s;margin-bottom:10px}
.gps-btn:active{transform:scale(.97)}
.gps-status{font-size:12px;padding:9px 12px;border-radius:9px;display:none;margin-bottom:10px}
.gps-status.ok{display:block;background:rgba(76,175,125,.1);color:var(--green);border:1px solid rgba(76,175,125,.2)}
.gps-status.fail{display:block;background:rgba(224,85,85,.08);color:var(--red);border:1px solid rgba(224,85,85,.18)}
.type-chips{display:flex;gap:7px;flex-wrap:wrap;margin-bottom:12px}
.type-chip{padding:8px 13px;border-radius:50px;border:1px solid var(--border2);background:transparent;color:var(--sub);font-size:12px;cursor:pointer;transition:.15s}
.type-chip.on{background:rgba(201,169,110,.1);border-color:var(--gold);color:var(--gold);font-weight:600}
.frow{display:flex;gap:8px;margin-bottom:10px}
.frow>div{flex:1;min-width:0}
.opill{font-size:11px;font-weight:600;color:var(--gold);background:rgba(201,169,110,.08);border:1px solid rgba(201,169,110,.2);padding:8px 12px;border-radius:8px;margin-top:10px;display:none}
.opill.on{display:block}

/* Saved addr cards */
.saved-card{background:var(--card);border:1px solid var(--border2);border-radius:var(--r2);padding:13px 14px;margin-bottom:10px;display:flex;align-items:center;gap:10px;position:relative}
.saved-card.active-addr{border-color:var(--gold);background:rgba(201,169,110,.04)}
.sc-icon{font-size:22px;flex-shrink:0}
.sc-info{flex:1;min-width:0}
.sc-label{font-size:13px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sc-addr{font-size:11px;color:var(--muted);margin-top:3px;line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sc-office{font-size:10px;color:var(--gold);margin-top:3px}
.sc-actions{display:flex;gap:6px;flex-shrink:0}
.sc-btn{width:30px;height:30px;border-radius:8px;border:1px solid var(--border2);background:var(--bg3);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:13px;transition:.15s}
.sc-btn:active{transform:scale(.85)}
.sc-btn.del{border-color:rgba(224,85,85,.3);background:rgba(224,85,85,.08);color:var(--red)}
.sc-btn.sel{border-color:rgba(201,169,110,.3);background:rgba(201,169,110,.08);color:var(--gold)}
.active-badge{position:absolute;top:-6px;right:10px;font-size:8px;font-weight:700;letter-spacing:1px;padding:2px 7px;border-radius:50px;background:var(--gold);color:#07070E}

/* Confirm modal */
.confirm-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:300;display:flex;align-items:center;justify-content:center;padding:24px;opacity:0;pointer-events:none;transition:opacity .2s}
.confirm-overlay.show{opacity:1;pointer-events:all}
.confirm-box{background:var(--card2);border:1px solid var(--border);border-radius:var(--r);padding:24px;width:100%;max-width:320px}
.confirm-icon{font-size:36px;text-align:center;margin-bottom:12px}
.confirm-title{font-family:'Cormorant Garamond',serif;font-size:18px;color:var(--gold2);text-align:center;margin-bottom:8px}
.confirm-msg{font-size:13px;color:var(--sub);text-align:center;line-height:1.5;margin-bottom:20px}
.confirm-btns{display:flex;gap:10px}
.confirm-btns button{flex:1;padding:12px;border-radius:var(--r3);border:none;font-size:13px;font-weight:700;cursor:pointer;transition:.15s}
.confirm-yes{background:linear-gradient(135deg,var(--gold),var(--gold2));color:#07070E}
.confirm-no{background:var(--bg3);border:1px solid var(--border)!important;color:var(--sub)}

/* Orders */
.co-body{padding:14px 16px}
.co-card{background:var(--card);border:1px solid var(--border2);border-radius:var(--r);margin-bottom:12px;overflow:hidden}
.co-head{padding:13px 15px;display:flex;align-items:center;gap:10px;border-bottom:1px solid var(--border2)}
.co-num{width:26px;height:26px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--gold2));color:#07070E;font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.co-title{font-size:14px;font-weight:600}
.co-inner{padding:14px 15px}
.sum-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px 16px;margin:0 16px 14px}
.sum-title{font-family:'Cormorant Garamond',serif;font-size:17px;color:var(--gold2);margin-bottom:10px}
.sum-line{display:flex;justify-content:space-between;font-size:12px;color:var(--sub);margin-bottom:5px}
.sum-div{height:1px;background:var(--border2);margin:8px 0}
.sum-total{display:flex;justify-content:space-between;font-size:15px;font-weight:700;color:var(--gold2)}
.co-foot{padding:0 16px 16px}
.ocard{background:var(--card);border:1px solid var(--border2);border-radius:var(--r);padding:14px;margin:0 14px 10px}
.ocard-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}
.o-id{font-size:12px;font-weight:700;color:var(--gold2)}
.o-date{font-size:10px;color:var(--muted);margin-top:2px}
.o-status{font-size:10px;font-weight:600;padding:4px 10px;border-radius:50px}
.sp{background:rgba(201,169,110,.1);color:var(--gold);border:1px solid rgba(201,169,110,.2)}
.sc2{background:rgba(76,175,125,.1);color:var(--green);border:1px solid rgba(76,175,125,.2)}
.sd{background:rgba(76,175,125,.15);color:var(--green);border:1px solid rgba(76,175,125,.25)}
.sx{background:rgba(224,85,85,.1);color:var(--red);border:1px solid rgba(224,85,85,.2)}
.o-items{font-size:12px;color:var(--sub);line-height:1.75;border-top:1px solid var(--border2);padding-top:8px;margin-top:4px}
.o-total{font-size:14px;font-weight:700;color:var(--gold2);margin-top:6px}
.profile-card{background:var(--card);border:1px solid var(--border2);border-radius:var(--r);padding:20px;margin:14px}
.profile-avatar{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--gold2));display:flex;align-items:center;justify-content:center;font-size:28px;margin:0 auto 12px;font-family:'Cormorant Garamond',serif;color:#07070E;font-weight:700}
.profile-name{text-align:center;font-family:'Cormorant Garamond',serif;font-size:20px;color:var(--gold2)}
.profile-stat{display:flex;border-top:1px solid var(--border2);margin-top:14px}
.ps{flex:1;text-align:center;padding:12px 6px;border-right:1px solid var(--border2)}
.ps:last-child{border-right:none}
.ps-n{font-size:20px;font-weight:700;color:var(--gold2)}
.ps-l{font-size:9px;letter-spacing:1px;text-transform:uppercase;color:var(--muted);margin-top:2px}
/* Toast */
.toast{position:fixed;bottom:calc(70px + var(--safe-bottom));left:50%;transform:translateX(-50%);background:var(--card2);border:1px solid var(--border);color:var(--text);padding:10px 20px;border-radius:50px;font-size:12px;white-space:nowrap;z-index:500;pointer-events:none;box-shadow:0 8px 28px rgba(0,0,0,.55);opacity:0;visibility:hidden;transition:opacity .22s,visibility .22s}
.toast.show{opacity:1;visibility:visible}
.toast.ok{border-color:var(--green);color:#90e8b8}
.toast.err{border-color:var(--red);color:#f0a0a0}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê CATALOG ‚ïê‚ïê‚ïê -->
<div id="pg-catalog" class="page">
  <div class="hdr">
    <div><div class="logo">AMBAR</div><div class="logo-sub">Premium Spirits</div></div>
    <div class="hdr-right">
      <div class="cart-pill" onclick="go('cart')">üõí <span class="cart-txt" id="hdr-tot">0 AED</span><span class="cart-dot" id="hdr-dot">0</span></div>
      <button class="lang-btn" onclick="flipLang()" id="lbtn">üá∑üá∫</button>
    </div>
  </div>
  <!-- Active address selector -->
  <div style="padding:8px 14px 0">
    <div class="addr-pill" onclick="openAddrModal()" id="addr-pill">
      <span class="addr-pill-dot" id="addr-pill-dot" style="background:var(--muted)"></span>
      <span class="addr-pill-txt" id="addr-pill-txt">–î–æ–±–∞–≤—å—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</span>
    </div>
  </div>
  <div class="chips" id="cat-chips"></div>
  <div class="sec-h" id="sh-catalog">–ö–∞—Ç–∞–ª–æ–≥</div>
  <div class="grid" id="p-grid"></div>
</div>

<!-- ‚ïê‚ïê‚ïê CART ‚ïê‚ïê‚ïê -->
<div id="pg-cart" class="page hidden">
  <div class="hdr">
    <div><div class="logo">AMBAR</div><div class="logo-sub" id="ls-cart">–ö–æ—Ä–∑–∏–Ω–∞</div></div>
    <div class="hdr-right"><button class="lang-btn" onclick="flipLang()">üá∑üá∫</button></div>
  </div>
  <!-- Active addr banner -->
  <div class="cart-addr-bar" onclick="openAddrModal()" id="cab">
    <span class="cab-icon">üìç</span>
    <div class="cab-info">
      <div class="cab-label" id="cab-label">–ê–î–†–ï–° –î–û–°–¢–ê–í–ö–ò</div>
      <div class="cab-addr" id="cab-addr">–ù–µ –≤—ã–±—Ä–∞–Ω ‚Äî –Ω–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</div>
    </div>
    <span class="cab-change" id="cab-change">–ò–∑–º–µ–Ω–∏—Ç—å</span>
  </div>
  <div id="cart-list"></div>
  <div id="tip-section" style="display:none">
    <div class="tip-wrap">
      <div class="tip-label" id="tip-lbl">–ß–ê–ï–í–´–ï</div>
      <div class="tip-row" id="tip-row"></div>
      <input class="tip-input" id="tip-input" type="number" min="0">
    </div>
  </div>
  <div id="cart-foot" style="display:none">
    <div class="cart-foot">
      <div class="total-row"><span class="total-lbl" id="tot-lbl">–ò–¢–û–ì–û</span><span class="total-val"><span id="tot-n">0</span> AED</span></div>
      <button class="btn-main" id="co-btn" onclick="tryOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ ‚Üí</button>
      <button class="btn-outline" id="clear-btn" onclick="clearCart()">üóë –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê ADDRESS PAGE ‚ïê‚ïê‚ïê -->
<div id="pg-address" class="page hidden">
  <div class="hdr">
    <div><div class="logo">AMBAR</div><div class="logo-sub" id="ls-addr">–ê–¥—Ä–µ—Å–∞</div></div>
    <div class="hdr-right"><button class="lang-btn" onclick="flipLang()">üá∑üá∫</button></div>
  </div>
  <div class="addr-page-body">
    <!-- Saved addresses list -->
    <div class="sec-h" id="sh-saved-addr">–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞</div>
    <div id="saved-cards"></div>

    <!-- Add new address form -->
    <div class="addr-form-card">
      <div class="addr-form-head">
        <span class="addr-form-title" id="add-form-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å</span>
      </div>
      <div class="addr-form-body">
        <!-- Method tabs -->
        <div class="mtabs">
          <button class="mtab on" id="mtab-gps" onclick="switchMethod('gps')"><i>üìç</i><span id="mtl-gps">GPS</span></button>
          <button class="mtab" id="mtab-manual" onclick="switchMethod('manual')"><i>‚úèÔ∏è</i><span id="mtl-manual">–í—Ä—É—á–Ω—É—é</span></button>
        </div>

        <!-- GPS panel -->
        <div class="mpanel show" id="mpanel-gps">
          <button class="gps-btn" onclick="grabGPS()" id="gps-btn"><span style="font-size:22px">üìç</span><span id="gps-lbl">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π</span></button>
          <div class="gps-status" id="gps-status"></div>
          <div id="gps-extra" style="display:none">
            <label class="flabel" id="lbl-type-gps">–¢–ò–ü –ê–î–†–ï–°–ê</label>
            <div class="type-chips" id="tchips-gps"></div>
            <div id="tfields-gps"></div>
          </div>
        </div>

        <!-- Manual panel -->
        <div class="mpanel" id="mpanel-manual">
          <label class="flabel" id="lbl-area">–†–ê–ô–û–ù / –ó–û–ù–ê</label>
          <div class="type-chips" id="area-chips" style="margin-bottom:12px"></div>
          <label class="flabel" id="lbl-street">–£–õ–ò–¶–ê / –ó–î–ê–ù–ò–ï</label>
          <input class="finput" id="man-street" type="text" style="margin-bottom:12px" placeholder="JVC Bloom Tower / Jumeirah St">
          <label class="flabel" id="lbl-type-man">–¢–ò–ü –ê–î–†–ï–°–ê</label>
          <div class="type-chips" id="tchips-man"></div>
          <div id="tfields-man"></div>
        </div>

        <div class="opill" id="opill"></div>
        <div class="ferr" id="addr-form-err"></div>

        <!-- Name label -->
        <label class="flabel" style="margin-top:14px" id="lbl-addr-name">–ù–ê–ó–í–ê–ù–ò–ï –ê–î–†–ï–°–ê</label>
        <input class="finput" id="addr-name-in" type="text" placeholder="–î–æ–º / –û—Ñ–∏—Å / JVC...">

        <label class="flabel" style="margin-top:14px" id="lbl-addr-comment">–ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô –î–õ–Ø –ö–£–†–¨–ï–†–ê</label>
        <textarea class="finput" id="addr-comment-in" rows="3" placeholder="–î–æ–º–æ—Ñ–æ–Ω 47, 3 —ç—Ç–∞–∂, –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å–ø—Ä–∞–≤–∞..." style="resize:none;height:76px;padding-top:10px"></textarea>

        <button class="btn-main" style="margin-top:14px" onclick="saveNewAddress()" id="save-addr-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–¥—Ä–µ—Å</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê ORDERS ‚ïê‚ïê‚ïê -->
<div id="pg-orders" class="page hidden">
  <div class="hdr">
    <div><div class="logo">AMBAR</div><div class="logo-sub" id="ls-ord">–ò—Å—Ç–æ—Ä–∏—è</div></div>
    <div class="hdr-right"><button class="lang-btn" onclick="flipLang()">üá∑üá∫</button></div>
  </div>
  <div class="sec-h" id="sh-orders">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</div>
  <div id="orders-list"></div>
</div>

<!-- ‚ïê‚ïê‚ïê PROFILE ‚ïê‚ïê‚ïê -->
<div id="pg-profile" class="page hidden">
  <div class="hdr">
    <div><div class="logo">AMBAR</div><div class="logo-sub" id="ls-prof">–ü—Ä–æ—Ñ–∏–ª—å</div></div>
    <div class="hdr-right"><button class="lang-btn" onclick="flipLang()">üá∑üá∫</button></div>
  </div>
  <div class="profile-card">
    <div class="profile-avatar" id="prof-av">A</div>
    <div class="profile-name" id="prof-name">‚Äî</div>
    <div class="profile-stat">
      <div class="ps"><div class="ps-n" id="stat-total">0</div><div class="ps-l" id="stat-lbl1">–ó–ê–ö–ê–ó–û–í</div></div>
      <div class="ps"><div class="ps-n" id="stat-active">0</div><div class="ps-l" id="stat-lbl2">–ê–ö–¢–ò–í–ù–´–•</div></div>
      <div class="ps"><div class="ps-n" id="stat-spent">0</div><div class="ps-l" id="stat-lbl3">AED</div></div>
    </div>
  </div>
  <div style="padding:0 14px 14px">
    <div class="sec-h" id="sh-active">–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã</div>
    <div id="active-list"></div>
  </div>
</div>

<!-- CHECKOUT (hidden, used by placeOrder) -->
<div id="pg-checkout" class="page hidden">
  <div class="hdr">
    <div><div class="logo">AMBAR</div><div class="logo-sub" id="ls-co">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</div></div>
    <div class="hdr-right"><button class="lang-btn" onclick="flipLang()">üá∑üá∫</button></div>
  </div>
  <div class="co-body">
    <div class="co-card">
      <div class="co-head"><div class="co-num">1</div><div class="co-title" id="co-addr-title">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</div></div>
      <div class="co-inner" id="co-addr-preview" style="font-size:13px;color:var(--sub);line-height:1.6"></div>
    </div>
    <div class="co-card">
      <div class="co-head"><div class="co-num">2</div><div class="co-title" id="ct2">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div></div>
      <div class="co-inner">
        <label class="flabel" id="phone-lbl">–¢–û–õ–¨–ö–û –¶–ò–§–†–´, 10‚Äì15 –ó–ù–ê–ö–û–í</label>
        <input class="finput" id="phone-in" type="tel" inputmode="numeric" placeholder="971501234567" oninput="this.classList.remove('err');el('phone-err').classList.remove('on')">
        <div class="ferr" id="phone-err"></div>
      </div>
    </div>
  </div>
  <div class="sum-card">
    <div class="sum-title" id="sum-title">–í–∞—à –∑–∞–∫–∞–∑</div>
    <div id="sum-items"></div>
    <div class="sum-div"></div>
    <div class="sum-line" id="sum-tip-row" style="display:none"><span id="sum-tip-lbl">–ß–∞–µ–≤—ã–µ</span><span id="sum-tip-val">0 AED</span></div>
    <div class="sum-total"><span id="sum-tot-lbl">–ò—Ç–æ–≥–æ</span><span id="sum-tot-val">0 AED</span></div>
  </div>
  <div class="co-foot"><button class="btn-main" id="place-btn" onclick="placeOrder()">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button></div>
</div>

<!-- NAV -->
<div class="bnav">
  <button class="nb on" id="nb-catalog" onclick="go('catalog')"><i>üçæ</i><span id="nbl-cat">–ö–∞—Ç–∞–ª–æ–≥</span></button>
  <button class="nb" id="nb-cart" onclick="go('cart')"><i>üõí</i><span id="nbl-cart">–ö–æ—Ä–∑–∏–Ω–∞</span></button>
  <button class="nb" id="nb-address" onclick="go('address')"><i>üìç</i><span id="nbl-addr">–ê–¥—Ä–µ—Å–∞</span></button>
  <button class="nb" id="nb-orders" onclick="go('orders')"><i>üì¶</i><span id="nbl-ord">–ò—Å—Ç–æ—Ä–∏—è</span></button>
  <button class="nb" id="nb-profile" onclick="go('profile');buildProfile()"><i>üë§</i><span id="nbl-prof">–ü—Ä–æ—Ñ–∏–ª—å</span></button>
</div>

<!-- Address selector modal -->
<div class="modal-overlay" id="addr-modal" onclick="closeAddrModal(event)">
  <div class="modal-sheet">
    <div class="modal-handle"></div>
    <div class="modal-title" id="modal-title">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</div>
    <div id="modal-addr-list"></div>
    <div class="modal-add-btn" onclick="closeAddrModal();go('address')">
      <span style="font-size:20px">‚ûï</span><span id="modal-add-lbl">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å</span>
    </div>
  </div>
</div>

<!-- Location mismatch confirm -->
<div class="confirm-overlay" id="loc-confirm">
  <div class="confirm-box">
    <div class="confirm-icon">üìç</div>
    <div class="confirm-title" id="lc-title">–í—ã —Ç–∞–º?</div>
    <div class="confirm-msg" id="lc-msg">–ü–æ—Ö–æ–∂–µ, –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –¥–∞–ª–µ–∫–æ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞. –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ —Ç—É–¥–∞?</div>
    <div class="confirm-btns">
      <button class="confirm-yes" onclick="confirmLocYes()" id="lc-yes">–î–∞, –∑–∞–∫–∞–∑–∞—Ç—å</button>
      <button class="confirm-no" onclick="confirmLocNo()" id="lc-no">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<!-- Toasts (two elements to avoid stuck animation) -->
<div class="toast" id="toast0"></div>
<div class="toast" id="toast1"></div>

<script>
// ‚îÄ‚îÄ OFFICES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const OFFICES=[
  {id:'office_central',name:'Ambar Central',lat:25.0969,lon:55.1587},
  {id:'office_north',  name:'Ambar North',  lat:25.0474,lon:55.2386},
];
const AREAS={
  ru:[
    {lbl:'–¶–µ–Ω—Ç—Ä / Downtown',   office:'office_central'},
    {lbl:'–î–µ–π—Ä–∞ / –ë—É—Ä-–î—É–±–∞–π', office:'office_central'},
    {lbl:'–ú–∞—Ä–∏–Ω–∞ / JBR',       office:'office_north'},
    {lbl:'JLT / Jumeirah',     office:'office_north'},
    {lbl:'–ë–∏–∑–Ω–µ—Å –ë—ç–π',         office:'office_central'},
    {lbl:'JVC / JVT',          office:'office_north'},
    {lbl:'–î—Ä—É–≥–æ–π —Ä–∞–π–æ–Ω',       office:'office_central'},
  ],
  en:[
    {lbl:'Downtown / DIFC',   office:'office_central'},
    {lbl:'Deira / Bur Dubai', office:'office_central'},
    {lbl:'Marina / JBR',      office:'office_north'},
    {lbl:'JLT / Jumeirah',    office:'office_north'},
    {lbl:'Business Bay',      office:'office_central'},
    {lbl:'JVC / JVT',         office:'office_north'},
    {lbl:'Other area',        office:'office_central'},
  ],
};
const TYPES={
  ru:[
    {id:'home',  icon:'üè†',lbl:'–î–æ–º / –í–∏–ª–ª–∞',fields:[
      {k:'villa',   l:'–í–ò–õ–õ–ê / –î–û–ú',       p:'–í–∏–ª–ª–∞ 54  –∏–ª–∏  Mimosa Cluster, Villa 63',req:true},
      {k:'street',  l:'–£–õ–ò–¶–ê / –û–†–ò–ï–ù–¢–ò–†',   p:'Jumeirah St, —Ä—è–¥–æ–º —Å –ø–∞—Ä–∫–æ–º',            req:false},
    ]},
    {id:'apt',   icon:'üè¢',lbl:'–ö–≤–∞—Ä—Ç–∏—Ä–∞',fields:[
      {k:'complex', l:'–ñ–ö / –ó–î–ê–ù–ò–ï',        p:'Marina Heights',                         req:true},
      {k:'apt',     l:'–ù–û–ú–ï–† –ö–í–ê–†–¢–ò–†–´',     p:'702',                                    req:true},
      {k:'floor',   l:'–≠–¢–ê–ñ',              p:'7',                                      req:false},
      {k:'entrance',l:'–ü–û–î–™–ï–ó–î / –í–•–û–î',    p:'B',                                      req:false},
    ]},
    {id:'office',icon:'üíº',lbl:'–û—Ñ–∏—Å',fields:[
      {k:'building',l:'–ë–¶ / –ó–î–ê–ù–ò–ï',        p:'DIFC Gate Building',                     req:true},
      {k:'floor',   l:'–≠–¢–ê–ñ',              p:'12',                                     req:false},
      {k:'room',    l:'–û–§–ò–°',              p:'305',                                    req:false},
    ]},
    {id:'other', icon:'üìå',lbl:'–î—Ä—É–≥–æ–µ',fields:[
      {k:'details', l:'–û–ü–ò–°–ê–ù–ò–ï / –û–†–ò–ï–ù–¢–ò–†',p:'–õ—é–±—ã–µ –¥–µ—Ç–∞–ª–∏...',                        req:true},
    ]},
  ],
  en:[
    {id:'home',  icon:'üè†',lbl:'House / Villa',fields:[
      {k:'villa',   l:'VILLA / HOUSE',      p:'Villa 54  or  Mimosa Cluster, Villa 63', req:true},
      {k:'street',  l:'STREET / LANDMARK',  p:'Jumeirah St, near the park',             req:false},
    ]},
    {id:'apt',   icon:'üè¢',lbl:'Apartment',fields:[
      {k:'complex', l:'BUILDING / COMPLEX', p:'Marina Heights',                         req:true},
      {k:'apt',     l:'APARTMENT NO.',      p:'702',                                    req:true},
      {k:'floor',   l:'FLOOR',             p:'7',                                      req:false},
      {k:'entrance',l:'ENTRANCE / GATE',   p:'B',                                      req:false},
    ]},
    {id:'office',icon:'üíº',lbl:'Office',fields:[
      {k:'building',l:'BUILDING / TOWER',   p:'DIFC Gate Building',                     req:true},
      {k:'floor',   l:'FLOOR',             p:'12',                                     req:false},
      {k:'room',    l:'OFFICE / UNIT',     p:'305',                                    req:false},
    ]},
    {id:'other', icon:'üìå',lbl:'Other',fields:[
      {k:'details', l:'DESCRIPTION',        p:'Any details, landmarks...',              req:true},
    ]},
  ],
};

function hav(a,b,c,d){const R=6371,dl=(c-a)*Math.PI/180,dm=(d-b)*Math.PI/180,e=Math.sin(dl/2)**2+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(dm/2)**2;return R*2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));}
function nearestOffice(lat,lon){return OFFICES.reduce((b,o)=>{const d=hav(lat,lon,o.lat,o.lon);return(!b||d<b._d)?{...o,_d:d}:b;},null);}

// ‚îÄ‚îÄ CATALOG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let P=[];
async function loadCatalog(){
  try{
    const r=await fetch('https://nakhundov02.github.io/ambarwebpage/catalog.json?t='+Date.now());
    ,16);
  _tt=setTimeout(()=>cur.classList.remove('show'),2800);
}
</script>
</body>
</html>
