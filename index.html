<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° | Dubai</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* â”€â”€ DESIGN TOKENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root {
  --gold: #C9A84C;
  --gold-light: #E8D5A3;
  --gold-dark: #8B6914;
  --black: #0A0A0A;
  --dark: #111111;
  --dark-2: #1A1A1A;
  --dark-3: #242424;
  --white: #F5F0E8;
  --white-dim: rgba(245,240,232,0.7);
  --white-faint: rgba(245,240,232,0.12);
  --red-oos: #C0392B;
  --radius: 4px;
  --font-serif: 'Cormorant Garamond', serif;
  --font-sans: 'Montserrat', sans-serif;
}

/* â”€â”€ RESET & BASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { height: 100%; overscroll-behavior: none; }
body {
  background: var(--black);
  color: var(--white);
  font-family: var(--font-sans);
  font-size: 14px;
  line-height: 1.5;
  min-height: 100vh;
  overflow-x: hidden;
  -webkit-tap-highlight-color: transparent;
}

/* â”€â”€ GRAIN OVERLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body::before {
  content: '';
  position: fixed; inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
  pointer-events: none; z-index: 9999; opacity: 0.6;
}

/* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
header {
  position: sticky; top: 0; z-index: 100;
  background: linear-gradient(180deg, var(--black) 60%, transparent);
  padding: 16px 20px 12px;
  border-bottom: 1px solid rgba(201,168,76,0.15);
  backdrop-filter: blur(20px);
}
.header-inner {
  display: flex; align-items: center; justify-content: space-between;
}
.brand {
  display: flex; align-items: center; gap: 10px;
}
.brand-logo {
  width: 36px; height: 36px;
  background: linear-gradient(135deg, var(--gold-dark), var(--gold));
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-serif);
  font-size: 18px; font-weight: 600;
  color: var(--black);
  box-shadow: 0 0 16px rgba(201,168,76,0.35);
}
.brand-name {
  font-family: var(--font-serif);
  font-size: 20px; font-weight: 300;
  letter-spacing: 0.1em;
  color: var(--white);
}
.brand-name span { color: var(--gold); }
.cart-btn {
  position: relative;
  background: var(--white-faint);
  border: 1px solid rgba(201,168,76,0.3);
  border-radius: 50%;
  width: 42px; height: 42px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--white); font-size: 18px;
  transition: all 0.2s;
}
.cart-btn:active { transform: scale(0.93); }
.cart-badge {
  position: absolute; top: -4px; right: -4px;
  background: var(--gold); color: var(--black);
  border-radius: 50%; width: 18px; height: 18px;
  font-size: 10px; font-weight: 600;
  display: flex; align-items: center; justify-content: center;
  display: none;
}
.cart-badge.visible { display: flex; }

/* â”€â”€ HERO STRIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero-strip {
  padding: 14px 20px;
  background: linear-gradient(90deg, rgba(201,168,76,0.08), transparent);
  border-bottom: 1px solid rgba(201,168,76,0.08);
  display: flex; align-items: center; gap: 20px;
  overflow-x: auto; scrollbar-width: none;
}
.hero-strip::-webkit-scrollbar { display: none; }
.hero-chip {
  flex-shrink: 0;
  display: flex; align-items: center; gap: 6px;
  font-size: 11px; font-weight: 500; letter-spacing: 0.08em;
  color: var(--white-dim); text-transform: uppercase;
}
.hero-chip-icon { font-size: 14px; }
.hero-divider { width: 1px; height: 16px; background: rgba(201,168,76,0.2); flex-shrink: 0; }

/* â”€â”€ SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.search-wrap {
  padding: 14px 20px 0;
}
.search-box {
  display: flex; align-items: center; gap: 10px;
  background: var(--dark-2);
  border: 1px solid rgba(201,168,76,0.2);
  border-radius: var(--radius);
  padding: 10px 14px;
}
.search-box input {
  flex: 1; background: none; border: none; outline: none;
  color: var(--white); font-family: var(--font-sans);
  font-size: 13px;
}
.search-box input::placeholder { color: rgba(245,240,232,0.35); }
.search-icon { color: var(--gold); font-size: 16px; }

/* â”€â”€ CATEGORIES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.categories {
  padding: 16px 20px 0;
  display: flex; gap: 8px;
  overflow-x: auto; scrollbar-width: none;
}
.categories::-webkit-scrollbar { display: none; }
.cat-chip {
  flex-shrink: 0;
  padding: 7px 14px;
  border-radius: 100px;
  border: 1px solid rgba(201,168,76,0.25);
  background: transparent;
  color: var(--white-dim);
  font-family: var(--font-sans);
  font-size: 12px; font-weight: 500;
  cursor: pointer; white-space: nowrap;
  transition: all 0.2s;
}
.cat-chip.active {
  background: var(--gold);
  border-color: var(--gold);
  color: var(--black);
  font-weight: 600;
}

/* â”€â”€ SECTION TITLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.section-header {
  padding: 20px 20px 0;
  display: flex; align-items: baseline; justify-content: space-between;
}
.section-title {
  font-family: var(--font-serif);
  font-size: 26px; font-weight: 300;
  letter-spacing: 0.04em;
}
.section-title em { font-style: italic; color: var(--gold); }
.section-count {
  font-size: 11px; color: var(--white-dim); letter-spacing: 0.08em;
  text-transform: uppercase;
}

/* â”€â”€ PRODUCT GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.products-grid {
  padding: 16px 20px 100px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* â”€â”€ PRODUCT CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.product-card {
  background: var(--dark-2);
  border: 1px solid rgba(201,168,76,0.1);
  border-radius: var(--radius);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s, border-color 0.2s;
  position: relative;
}
.product-card:active { transform: scale(0.97); }
.product-card:hover { border-color: rgba(201,168,76,0.35); }
.product-card.out-of-stock { opacity: 0.55; }

.product-img-wrap {
  position: relative;
  background: var(--dark-3);
  aspect-ratio: 3/4;
  display: flex; align-items: center; justify-content: center;
  overflow: hidden;
}
.product-img {
  width: 70%; height: 80%;
  object-fit: contain;
  transition: transform 0.4s;
}
.product-card:hover .product-img { transform: scale(1.04); }
.product-img-fallback {
  font-size: 52px; line-height: 1;
  filter: drop-shadow(0 4px 20px rgba(201,168,76,0.15));
}
.oos-badge {
  position: absolute; top: 8px; left: 8px;
  background: rgba(192,57,43,0.85);
  color: #fff;
  font-size: 9px; font-weight: 600;
  letter-spacing: 0.1em; text-transform: uppercase;
  padding: 3px 7px; border-radius: 2px;
  backdrop-filter: blur(4px);
}
.country-badge {
  position: absolute; bottom: 8px; right: 8px;
  background: rgba(10,10,10,0.7);
  border: 1px solid rgba(201,168,76,0.2);
  font-size: 9px; color: var(--gold-light);
  padding: 2px 6px; border-radius: 2px;
  letter-spacing: 0.08em;
  backdrop-filter: blur(4px);
}

.product-info {
  padding: 10px 10px 12px;
}
.product-category {
  font-size: 9px; font-weight: 600;
  color: var(--gold);
  letter-spacing: 0.14em; text-transform: uppercase;
  margin-bottom: 4px;
}
.product-name {
  font-family: var(--font-serif);
  font-size: 15px; font-weight: 400; line-height: 1.2;
  margin-bottom: 6px;
}
.product-meta {
  display: flex; gap: 6px; align-items: center;
  margin-bottom: 8px;
}
.product-meta-tag {
  font-size: 10px; color: var(--white-dim);
  background: var(--dark-3);
  padding: 2px 6px; border-radius: 2px;
}
.product-footer {
  display: flex; align-items: center; justify-content: space-between;
}
.product-price {
  font-family: var(--font-serif);
  font-size: 17px; font-weight: 500;
  color: var(--gold);
}
.product-price .currency { font-size: 12px; margin-left: 2px; }
.add-btn {
  width: 28px; height: 28px;
  background: var(--gold);
  border: none; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; font-size: 16px; color: var(--black); font-weight: 700;
  transition: all 0.2s;
  flex-shrink: 0;
}
.add-btn:active { transform: scale(0.88); background: var(--gold-dark); }
.add-btn.in-cart {
  background: transparent;
  border: 1.5px solid var(--gold);
  color: var(--gold);
  font-size: 12px;
}

/* â”€â”€ PRODUCT MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-overlay {
  position: fixed; inset: 0; z-index: 200;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(6px);
  display: flex; align-items: flex-end;
  opacity: 0; pointer-events: none;
  transition: opacity 0.25s;
}
.modal-overlay.open { opacity: 1; pointer-events: all; }

.modal {
  background: var(--dark);
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  border-top: 1px solid rgba(201,168,76,0.2);
  width: 100%;
  max-height: 88vh; overflow-y: auto;
  padding-bottom: 32px;
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
}
.modal-overlay.open .modal { transform: translateY(0); }

.modal-handle {
  width: 36px; height: 4px;
  background: rgba(245,240,232,0.2);
  border-radius: 2px;
  margin: 12px auto 0;
}
.modal-img-wrap {
  background: var(--dark-2);
  height: 260px;
  display: flex; align-items: center; justify-content: center;
  overflow: hidden; margin: 12px 20px;
  border-radius: 4px;
  border: 1px solid rgba(201,168,76,0.1);
}
.modal-img {
  height: 85%; width: 50%; object-fit: contain;
}
.modal-img-fallback { font-size: 80px; }
.modal-body { padding: 0 20px; }
.modal-category {
  font-size: 10px; font-weight: 600;
  color: var(--gold); letter-spacing: 0.16em;
  text-transform: uppercase; margin-bottom: 6px;
}
.modal-name {
  font-family: var(--font-serif);
  font-size: 28px; font-weight: 300; line-height: 1.15;
  margin-bottom: 4px;
}
.modal-country {
  font-size: 12px; color: var(--white-dim); margin-bottom: 12px;
}
.modal-desc {
  font-size: 13px; color: var(--white-dim);
  line-height: 1.65; margin-bottom: 16px;
}
.modal-specs {
  display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px;
}
.modal-spec {
  padding: 5px 12px;
  background: var(--dark-2);
  border: 1px solid rgba(201,168,76,0.15);
  border-radius: 2px;
  font-size: 11px; color: var(--white-dim);
}
.modal-spec strong { color: var(--white); }
.modal-divider {
  height: 1px; background: rgba(201,168,76,0.1);
  margin-bottom: 20px;
}
.modal-price-row {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 14px;
}
.modal-price {
  font-family: var(--font-serif);
  font-size: 32px; font-weight: 400;
  color: var(--gold);
}
.modal-price .curr { font-size: 16px; }
.qty-control {
  display: flex; align-items: center; gap: 14px;
}
.qty-btn {
  width: 32px; height: 32px;
  background: var(--dark-3);
  border: 1px solid rgba(201,168,76,0.25);
  border-radius: 50%;
  color: var(--white); font-size: 18px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: all 0.2s;
}
.qty-btn:active { background: var(--gold); color: var(--black); }
.qty-num {
  font-family: var(--font-serif);
  font-size: 22px; min-width: 24px; text-align: center;
}
.modal-add-btn {
  width: 100%;
  padding: 15px;
  background: linear-gradient(135deg, var(--gold-dark), var(--gold));
  border: none; border-radius: var(--radius);
  color: var(--black);
  font-family: var(--font-sans);
  font-size: 13px; font-weight: 600;
  letter-spacing: 0.1em; text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s;
  display: flex; align-items: center; justify-content: center; gap: 8px;
}
.modal-add-btn:active { transform: scale(0.98); opacity: 0.9; }
.modal-add-btn.oos {
  background: var(--dark-3); color: var(--white-dim);
  pointer-events: none;
}

/* â”€â”€ CART SHEET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cart-overlay {
  position: fixed; inset: 0; z-index: 300;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(8px);
  opacity: 0; pointer-events: none;
  transition: opacity 0.25s;
}
.cart-overlay.open { opacity: 1; pointer-events: all; }
.cart-sheet {
  position: absolute; bottom: 0; left: 0; right: 0;
  background: var(--dark);
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  border-top: 1px solid rgba(201,168,76,0.25);
  max-height: 90vh;
  overflow-y: auto;
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
  padding-bottom: 32px;
}
.cart-overlay.open .cart-sheet { transform: translateY(0); }
.cart-header {
  padding: 16px 20px;
  border-bottom: 1px solid rgba(201,168,76,0.1);
  display: flex; align-items: center; justify-content: space-between;
}
.cart-title {
  font-family: var(--font-serif);
  font-size: 24px; font-weight: 300;
}
.cart-close {
  width: 32px; height: 32px;
  background: var(--dark-3); border: none; border-radius: 50%;
  color: var(--white-dim); font-size: 18px; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
}
.cart-items { padding: 12px 20px; }
.cart-item {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid rgba(245,240,232,0.06);
}
.cart-item-emoji { font-size: 28px; }
.cart-item-info { flex: 1; }
.cart-item-name {
  font-family: var(--font-serif);
  font-size: 15px; margin-bottom: 2px;
}
.cart-item-price { font-size: 12px; color: var(--gold); }
.cart-item-qty {
  display: flex; align-items: center; gap: 10px;
  font-size: 13px;
}
.cart-qty-btn {
  width: 26px; height: 26px;
  background: var(--dark-3);
  border: 1px solid rgba(201,168,76,0.2);
  border-radius: 50%; color: var(--white);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; font-size: 14px;
}

/* â”€â”€ ADDRESS FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.form-section { padding: 16px 20px 0; }
.form-label {
  font-size: 10px; font-weight: 600;
  color: var(--gold); letter-spacing: 0.12em;
  text-transform: uppercase; margin-bottom: 8px;
}
.form-input {
  width: 100%;
  background: var(--dark-2);
  border: 1px solid rgba(201,168,76,0.2);
  border-radius: var(--radius);
  padding: 12px 14px;
  color: var(--white);
  font-family: var(--font-sans); font-size: 13px;
  outline: none; margin-bottom: 10px;
}
.form-input:focus { border-color: var(--gold); }
.form-input::placeholder { color: rgba(245,240,232,0.3); }

/* â”€â”€ PAYMENT METHODS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.payment-grid {
  display: grid; grid-template-columns: 1fr 1fr 1fr;
  gap: 8px; margin-bottom: 10px;
}
.payment-option {
  padding: 10px 6px;
  background: var(--dark-2);
  border: 1.5px solid rgba(201,168,76,0.15);
  border-radius: var(--radius);
  text-align: center; cursor: pointer;
  transition: all 0.2s;
}
.payment-option.selected {
  border-color: var(--gold);
  background: rgba(201,168,76,0.08);
}
.payment-option-icon { font-size: 20px; margin-bottom: 3px; }
.payment-option-label {
  font-size: 9px; font-weight: 600;
  letter-spacing: 0.06em; text-transform: uppercase;
  color: var(--white-dim);
}
.payment-option.selected .payment-option-label { color: var(--gold); }

/* â”€â”€ CART TOTALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cart-totals {
  padding: 14px 20px 0;
  border-top: 1px solid rgba(201,168,76,0.1);
}
.cart-row {
  display: flex; justify-content: space-between;
  font-size: 12px; color: var(--white-dim);
  margin-bottom: 6px;
}
.cart-row.total {
  font-family: var(--font-serif);
  font-size: 20px; color: var(--white);
  margin-top: 8px; padding-top: 8px;
  border-top: 1px solid rgba(201,168,76,0.1);
}
.cart-row.total .val { color: var(--gold); }

.checkout-btn {
  margin: 14px 20px 0;
  width: calc(100% - 40px);
  padding: 16px;
  background: linear-gradient(135deg, var(--gold-dark), var(--gold));
  border: none; border-radius: var(--radius);
  color: var(--black); font-family: var(--font-sans);
  font-size: 13px; font-weight: 700; letter-spacing: 0.12em;
  text-transform: uppercase; cursor: pointer;
  transition: all 0.2s;
  display: flex; align-items: center; justify-content: center; gap: 8px;
}
.checkout-btn:active { opacity: 0.88; transform: scale(0.99); }
.checkout-btn:disabled { background: var(--dark-3); color: var(--white-dim); pointer-events: none; }

/* â”€â”€ EMPTY CART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.empty-cart {
  padding: 50px 20px;
  text-align: center;
  color: var(--white-dim);
}
.empty-cart-icon { font-size: 48px; margin-bottom: 12px; }
.empty-cart-text { font-family: var(--font-serif); font-size: 20px; margin-bottom: 6px; }
.empty-cart-sub { font-size: 12px; }

/* â”€â”€ SUCCESS SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.success-screen {
  position: fixed; inset: 0; z-index: 400;
  background: var(--black);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 40px 24px;
  text-align: center;
  opacity: 0; transform: scale(0.95);
  pointer-events: none;
  transition: all 0.35s;
}
.success-screen.show {
  opacity: 1; transform: scale(1); pointer-events: all;
}
.success-ring {
  width: 90px; height: 90px;
  border-radius: 50%;
  border: 2px solid var(--gold);
  display: flex; align-items: center; justify-content: center;
  font-size: 36px; margin-bottom: 24px;
  box-shadow: 0 0 40px rgba(201,168,76,0.2);
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0%, 100% { box-shadow: 0 0 40px rgba(201,168,76,0.2); }
  50% { box-shadow: 0 0 60px rgba(201,168,76,0.4); }
}
.success-title {
  font-family: var(--font-serif);
  font-size: 32px; font-weight: 300; margin-bottom: 10px;
}
.success-sub {
  font-size: 14px; color: var(--white-dim);
  max-width: 260px; margin: 0 auto 28px;
  line-height: 1.6;
}
.success-order-id {
  font-size: 11px; letter-spacing: 0.12em;
  color: var(--gold); margin-bottom: 28px;
}
.track-btn {
  padding: 14px 32px;
  background: linear-gradient(135deg, var(--gold-dark), var(--gold));
  border: none; border-radius: var(--radius);
  color: var(--black); font-family: var(--font-sans);
  font-size: 12px; font-weight: 700; letter-spacing: 0.1em;
  text-transform: uppercase; cursor: pointer;
}

/* â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.product-card { animation: fadeUp 0.4s ease both; }
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}
.products-grid .product-card:nth-child(1) { animation-delay: 0.05s; }
.products-grid .product-card:nth-child(2) { animation-delay: 0.10s; }
.products-grid .product-card:nth-child(3) { animation-delay: 0.15s; }
.products-grid .product-card:nth-child(4) { animation-delay: 0.20s; }
.products-grid .product-card:nth-child(5) { animation-delay: 0.25s; }
.products-grid .product-card:nth-child(6) { animation-delay: 0.30s; }

/* â”€â”€ SCROLLBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
::-webkit-scrollbar { width: 3px; height: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.3); border-radius: 4px; }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="brand">
      <div class="brand-logo">L</div>
      <div class="brand-name">Luxe<span>Spirits</span></div>
    </div>
    <div class="cart-btn" onclick="openCart()">
      ğŸ›’
      <div class="cart-badge" id="cartBadge">0</div>
    </div>
  </div>
</header>

<!-- HERO STRIP -->
<div class="hero-strip">
  <div class="hero-chip"><span class="hero-chip-icon">âš¡</span> Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° 30â€“60 Ğ¼Ğ¸Ğ½</div>
  <div class="hero-divider"></div>
  <div class="hero-chip"><span class="hero-chip-icon">âœ…</span> Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»</div>
  <div class="hero-divider"></div>
  <div class="hero-chip"><span class="hero-chip-icon">ğŸ•</span> 24 / 7</div>
  <div class="hero-divider"></div>
  <div class="hero-chip"><span class="hero-chip-icon">ğŸ”</span> Ğ’ÑĞµ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹</div>
</div>

<!-- SEARCH -->
<div class="search-wrap">
  <div class="search-box">
    <span class="search-icon">ğŸ”</span>
    <input type="search" placeholder="ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ñƒ..." id="searchInput" oninput="filterProducts()">
  </div>
</div>

<!-- CATEGORIES -->
<div class="categories" id="categoriesBar"></div>

<!-- SECTION HEADER -->
<div class="section-header">
  <div class="section-title"><em>ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³</em></div>
  <div class="section-count" id="productCount">0 Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹</div>
</div>

<!-- PRODUCTS -->
<div class="products-grid" id="productsGrid"></div>

<!-- PRODUCT MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
  <div class="modal" id="productModal">
    <div class="modal-handle"></div>
    <div class="modal-img-wrap">
      <img class="modal-img" id="modalImg" src="" alt="" onerror="this.style.display='none'; document.getElementById('modalImgFallback').style.display='block'">
      <div class="modal-img-fallback" id="modalImgFallback" style="display:none"></div>
    </div>
    <div class="modal-body">
      <div class="modal-category" id="modalCategory"></div>
      <div class="modal-name" id="modalName"></div>
      <div class="modal-country" id="modalCountry"></div>
      <div class="modal-desc" id="modalDesc"></div>
      <div class="modal-specs" id="modalSpecs"></div>
      <div class="modal-divider"></div>
      <div class="modal-price-row">
        <div class="modal-price" id="modalPrice"></div>
        <div class="qty-control">
          <div class="qty-btn" onclick="changeQty(-1)">âˆ’</div>
          <div class="qty-num" id="modalQty">1</div>
          <div class="qty-btn" onclick="changeQty(1)">+</div>
        </div>
      </div>
      <button class="modal-add-btn" id="modalAddBtn" onclick="addToCartFromModal()">
        ğŸ›’ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ
      </button>
    </div>
  </div>
</div>

<!-- CART SHEET -->
<div class="cart-overlay" id="cartOverlay" onclick="closeCartOverlay(event)">
  <div class="cart-sheet" id="cartSheet">
    <div class="cart-header">
      <div class="cart-title">Ğ’Ğ°Ñˆ Ğ·Ğ°ĞºĞ°Ğ·</div>
      <button class="cart-close" onclick="closeCart()">âœ•</button>
    </div>
    <div id="cartContent"></div>
  </div>
</div>

<!-- SUCCESS SCREEN -->
<div class="success-screen" id="successScreen">
  <div class="success-ring">ğŸ¥‚</div>
  <div class="success-title">Ğ—Ğ°ĞºĞ°Ğ· Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚!</div>
  <div class="success-sub">ĞšÑƒÑ€ÑŒĞµÑ€ ÑƒĞ¶Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑÑ. ĞĞ¶Ğ¸Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ²Ğ¾Ğ½ĞºĞ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ.</div>
  <div class="success-order-id" id="successOrderId"></div>
  <button class="track-btn" onclick="openTracking()">ğŸ“ ĞÑ‚ÑĞ»ĞµĞ´Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºÑƒ</button>
</div>

<script>
// â”€â”€ TELEGRAM INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const tg = window.Telegram?.WebApp;
if (tg) {
  tg.ready();
  tg.expand();
  tg.setHeaderColor('#0A0A0A');
  tg.setBackgroundColor('#0A0A0A');
}

// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const API_BASE = window.location.origin + '/api';
let catalog = [];
let cart = {};
let currentProduct = null;
let currentQty = 1;
let activeCategory = 'Ğ’ÑĞµ';
let searchQuery = '';
let lastOrderId = null;
const PAYMENT_METHODS = [
  { id: 'card', icon: 'ğŸ’³', label: 'ĞšĞ°Ñ€Ñ‚Ğ°' },
  { id: 'apple_pay', icon: 'ğŸ', label: 'Apple Pay' },
  { id: 'google_pay', icon: 'ğŸ¤–', label: 'Google Pay' },
  { id: 'cash', icon: 'ğŸ’µ', label: 'ĞĞ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ' },
  { id: 'crypto', icon: 'â‚¿', label: 'ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾' },
  { id: 'bank', icon: 'ğŸ¦', label: 'ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´' },
];
let selectedPayment = 'card';

// â”€â”€ CATEGORY EMOJI MAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CATEGORY_EMOJI = {
  'Ğ¨Ğ°Ğ¼Ğ¿Ğ°Ğ½ÑĞºĞ¾Ğµ': 'ğŸ¾', 'ĞšĞ¾Ğ½ÑŒÑĞº': 'ğŸ¥ƒ', 'Ğ’Ğ¸ÑĞºĞ¸': 'ğŸ¥ƒ', 'Ğ’Ğ¾Ğ´ĞºĞ°': 'ğŸ«™',
  'Ğ¢ĞµĞºĞ¸Ğ»Ğ°': 'ğŸŒµ', 'Ğ’Ğ¸Ğ½Ğ¾': 'ğŸ·', 'Ğ Ğ¾Ğ¼': 'ğŸ', 'Ğ”Ğ¶Ğ¸Ğ½': 'ğŸŒ¿',
  'ĞŸĞ¸Ğ²Ğ¾': 'ğŸº', 'Ğ›Ğ¸ĞºÑ‘Ñ€': 'ğŸ¯', 'Ğ”Ñ€ÑƒĞ³Ğ¾Ğµ': 'ğŸ¶'
};

// â”€â”€ LOAD CATALOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadCatalog() {
  try {
    const res = await fetch(`${API_BASE}/catalog`);
    const data = await res.json();
    catalog = data.products;
  } catch {
    // Fallback demo catalog
    catalog = getDemoCatalog();
  }
  buildCategories();
  renderProducts();
}

function getDemoCatalog() {
  return [
    {id:'1',name:'Dom PÃ©rignon 2013',category:'Ğ¨Ğ°Ğ¼Ğ¿Ğ°Ğ½ÑĞºĞ¾Ğµ',price:3500,description:'ĞšÑƒĞ»ÑŒÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑˆĞ°Ğ¼Ğ¿Ğ°Ğ½ÑĞºĞ¾Ğµ. Ğ‘Ğ¾Ğ³Ğ°Ñ‚Ñ‹Ğ¹ Ğ±ÑƒĞºĞµÑ‚ Ñ Ğ½Ğ¾Ñ‚Ğ°Ğ¼Ğ¸ Ğ¼Ğ¸Ğ½Ğ´Ğ°Ğ»Ñ Ğ¸ ÑĞ²ĞµĞ¶ĞµĞ¹ Ğ²Ñ‹Ğ¿ĞµÑ‡ĞºĞ¸.',volume:'750Ğ¼Ğ»',alcohol:'12.5%',in_stock:true,country:'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ'},
    {id:'2',name:'Hennessy XO',category:'ĞšĞ¾Ğ½ÑŒÑĞº',price:2800,description:'Ğ˜ÑĞºĞ»ÑÑ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ½ÑŒÑĞº Ğ¸Ğ· 100 Ğ¾-Ğ´Ğµ-Ğ²Ğ¸. Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹ Ğ²ĞºÑƒÑ Ñ Ğ½Ğ¾Ñ‚Ğ°Ğ¼Ğ¸ Ğ´ÑƒĞ±Ğ° Ğ¸ ÑĞ¿ĞµÑ†Ğ¸Ğ¹.',volume:'700Ğ¼Ğ»',alcohol:'40%',in_stock:true,country:'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ'},
    {id:'3',name:'The Macallan 18',category:'Ğ’Ğ¸ÑĞºĞ¸',price:4200,description:'Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ñ‹Ğ¹ ÑˆĞ¾Ñ‚Ğ»Ğ°Ğ½Ğ´ÑĞºĞ¸Ğ¹ Ğ²Ğ¸ÑĞºĞ¸. 18 Ğ»ĞµÑ‚ Ğ²Ñ‹Ğ´ĞµÑ€Ğ¶ĞºĞ¸ Ğ² Ğ±Ğ¾Ñ‡ĞºĞ°Ñ… Ğ¸ÑĞ¿Ğ°Ğ½ÑĞºĞ¾Ğ³Ğ¾ Ğ´ÑƒĞ±Ğ°.',volume:'700Ğ¼Ğ»',alcohol:'43%',in_stock:true,country:'Ğ¨Ğ¾Ñ‚Ğ»Ğ°Ğ½Ğ´Ğ¸Ñ'},
    {id:'4',name:'Grey Goose Original',category:'Ğ’Ğ¾Ğ´ĞºĞ°',price:850,description:'ĞŸÑ€ĞµĞ¼Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ñ€Ğ°Ğ½Ñ†ÑƒĞ·ÑĞºĞ°Ñ Ğ²Ğ¾Ğ´ĞºĞ° Ğ¸Ğ· Ğ¿ÑˆĞµĞ½Ğ¸Ñ†Ñ‹ ĞŸĞ¸ĞºĞ°Ñ€Ğ´Ğ¸Ğ¸.',volume:'700Ğ¼Ğ»',alcohol:'40%',in_stock:false,country:'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ'},
    {id:'5',name:'PatrÃ³n Silver',category:'Ğ¢ĞµĞºĞ¸Ğ»Ğ°',price:1200,description:'Ğ£Ğ»ÑŒÑ‚Ñ€Ğ°-Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ñ‚ĞµĞºĞ¸Ğ»Ğ° Ñ Ğ½Ğ¾Ñ‚Ğ°Ğ¼Ğ¸ Ñ†Ğ¸Ñ‚Ñ€ÑƒÑĞ° Ğ¸ ÑĞ²ĞµĞ¶ĞµĞ¹ Ğ°Ğ³Ğ°Ğ²Ñ‹.',volume:'700Ğ¼Ğ»',alcohol:'40%',in_stock:true,country:'ĞœĞµĞºÑĞ¸ĞºĞ°'},
    {id:'6',name:'ChÃ¢teau PÃ©trus 2015',category:'Ğ’Ğ¸Ğ½Ğ¾',price:18000,description:'ĞĞ´Ğ¸Ğ½ Ğ¸Ğ· ÑĞ°Ğ¼Ñ‹Ñ… Ğ¿Ñ€ĞµÑÑ‚Ğ¸Ğ¶Ğ½Ñ‹Ñ… Ğ²Ğ¸Ğ½ Ğ¼Ğ¸Ñ€Ğ°. Ğ¢ĞµÑ€Ñ€ÑƒĞ°Ñ€ ĞŸĞ¾Ğ¼ĞµÑ€Ğ¾Ğ»ÑŒ, Ğ‘Ğ¾Ñ€Ğ´Ğ¾.',volume:'750Ğ¼Ğ»',alcohol:'14.5%',in_stock:true,country:'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ'},
    {id:'7',name:'Bumbu Original Rum',category:'Ğ Ğ¾Ğ¼',price:950,description:'Ğ ĞµĞ¼ĞµÑĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€Ğ¾Ğ¼ Ñ Ğ½Ğ¾Ñ‚Ğ°Ğ¼Ğ¸ Ñ‚Ñ€Ğ¾ÑÑ‚Ğ½Ğ¸ĞºĞ° Ğ¸ ĞºĞ°Ñ€Ğ¸Ğ±ÑĞºĞ¸Ñ… ÑĞ¿ĞµÑ†Ğ¸Ğ¹.',volume:'700Ğ¼Ğ»',alcohol:'35%',in_stock:true,country:'Ğ‘Ğ°Ñ€Ğ±Ğ°Ğ´Ğ¾Ñ'},
    {id:'8',name:"Hendrick's Gin",category:'Ğ”Ğ¶Ğ¸Ğ½',price:1100,description:'Ğ¨Ğ¾Ñ‚Ğ»Ğ°Ğ½Ğ´ÑĞºĞ¸Ğ¹ Ğ´Ğ¶Ğ¸Ğ½ Ñ Ğ¸Ğ½Ñ„ÑƒĞ·Ğ¸ĞµĞ¹ Ğ¾Ğ³ÑƒÑ€Ñ†Ğ° Ğ¸ Ğ»ĞµĞ¿ĞµÑÑ‚ĞºĞ¾Ğ² Ñ€Ğ¾Ğ·Ñ‹.',volume:'700Ğ¼Ğ»',alcohol:'41.4%',in_stock:true,country:'Ğ¨Ğ¾Ñ‚Ğ»Ğ°Ğ½Ğ´Ğ¸Ñ'},
    {id:'9',name:'MoÃ«t & Chandon ImpÃ©rial',category:'Ğ¨Ğ°Ğ¼Ğ¿Ğ°Ğ½ÑĞºĞ¾Ğµ',price:1200,description:'ĞšĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑˆĞ°Ğ¼Ğ¿Ğ°Ğ½ÑĞºĞ¾Ğµ Moet. Ğ¤Ñ€ÑƒĞºÑ‚Ğ¾Ğ²Ğ¾-Ñ†Ğ²ĞµÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ğ±ÑƒĞºĞµÑ‚.',volume:'750Ğ¼Ğ»',alcohol:'12%',in_stock:true,country:'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ'},
    {id:'10',name:'Johnnie Walker Blue Label',category:'Ğ’Ğ¸ÑĞºĞ¸',price:3500,description:'ĞĞ´Ğ¸Ğ½ Ğ¸Ğ· Ñ€ĞµĞ´Ñ‡Ğ°Ğ¹ÑˆĞ¸Ñ… ĞºÑƒĞ¿Ğ°Ğ¶ĞµĞ¹ Ğ² Ğ¼Ğ¸Ñ€Ğµ. ĞĞµĞ¶Ğ½Ñ‹Ğ¹, Ğ±Ğ°Ñ€Ñ…Ğ°Ñ‚Ğ¸ÑÑ‚Ñ‹Ğ¹ Ğ²ĞºÑƒÑ.',volume:'700Ğ¼Ğ»',alcohol:'40%',in_stock:true,country:'Ğ¨Ğ¾Ñ‚Ğ»Ğ°Ğ½Ğ´Ğ¸Ñ'},
    {id:'11',name:'Belvedere Vodka',category:'Ğ’Ğ¾Ğ´ĞºĞ°',price:1050,description:'ĞŸĞ¾Ğ»ÑŒÑĞºĞ°Ñ Ğ²Ğ¾Ğ´ĞºĞ° Ğ¸Ğ· ÑÑ‚Ğ¾Ğ»ĞµÑ‚Ğ½ĞµĞ¹ Ñ€Ğ¶Ğ¸ Ğ”Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¾Ğµ Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ğ¾.',volume:'700Ğ¼Ğ»',alcohol:'40%',in_stock:true,country:'ĞŸĞ¾Ğ»ÑŒÑˆĞ°'},
    {id:'12',name:'RÃ©my Martin Louis XIII',category:'ĞšĞ¾Ğ½ÑŒÑĞº',price:45000,description:'ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ°Ğ¿ĞµĞºÑ ĞºĞ¾Ğ½ÑŒÑÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ°. Ğ¡Ğ¼ĞµÑÑŒ 1200 Ğ¾-Ğ´Ğµ-Ğ²Ğ¸ Ğ´Ğ¾ 100 Ğ»ĞµÑ‚.',volume:'700Ğ¼Ğ»',alcohol:'40%',in_stock:true,country:'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ'},
  ];
}

// â”€â”€ CATEGORIES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildCategories() {
  const cats = ['Ğ’ÑĞµ', ...new Set(catalog.map(p => p.category || p['ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ']))].filter(Boolean);
  const bar = document.getElementById('categoriesBar');
  bar.innerHTML = cats.map(cat => `
    <div class="cat-chip ${cat === activeCategory ? 'active' : ''}" onclick="setCategory('${cat}')">${cat}</div>
  `).join('');
}

function setCategory(cat) {
  activeCategory = cat;
  buildCategories();
  renderProducts();
}

// â”€â”€ FILTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function filterProducts() {
  searchQuery = document.getElementById('searchInput').value.toLowerCase();
  renderProducts();
}

function getFiltered() {
  return catalog.filter(p => {
    const name = (p.name || p['ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ'] || '').toLowerCase();
    const cat = p.category || p['ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ'] || '';
    const matchCat = activeCategory === 'Ğ’ÑĞµ' || cat === activeCategory;
    const matchSearch = !searchQuery || name.includes(searchQuery);
    return matchCat && matchSearch;
  });
}

// â”€â”€ RENDER PRODUCTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderProducts() {
  const products = getFiltered();
  const grid = document.getElementById('productsGrid');
  document.getElementById('productCount').textContent = `${products.length} Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹`;
  
  if (!products.length) {
    grid.innerHTML = `<div style="grid-column:1/-1;padding:40px;text-align:center;color:var(--white-dim)">
      <div style="font-size:36px;margin-bottom:10px">ğŸ”</div>
      <div style="font-family:var(--font-serif);font-size:18px">ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾</div>
    </div>`;
    return;
  }
  
  grid.innerHTML = products.map((p, i) => {
    const id = p.id || p['ID'] || i;
    const name = p.name || p['ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ'] || '';
    const cat = p.category || p['ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ'] || '';
    const price = p.price || p['Ğ¦ĞµĞ½Ğ°'] || 0;
    const inStock = p.in_stock !== undefined ? p.in_stock : (p['Ğ’ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸'] !== 'ĞĞµÑ‚');
    const country = p.country || p['Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°'] || '';
    const inCart = !!cart[id];
    const emoji = CATEGORY_EMOJI[cat] || 'ğŸ¶';
    
    return `<div class="product-card ${inStock ? '' : 'out-of-stock'}" onclick="openProduct('${id}')">
      <div class="product-img-wrap">
        <div class="product-img-fallback">${emoji}</div>
        ${!inStock ? '<div class="oos-badge">ĞĞµÑ‚ Ğ² Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸</div>' : ''}
        ${country ? `<div class="country-badge">${country}</div>` : ''}
      </div>
      <div class="product-info">
        <div class="product-category">${cat}</div>
        <div class="product-name">${name}</div>
        <div class="product-meta">
          ${p.volume||p['ĞĞ±ÑŠÑ‘Ğ¼'] ? `<span class="product-meta-tag">${p.volume||p['ĞĞ±ÑŠÑ‘Ğ¼']}</span>` : ''}
          ${p.alcohol||p['ĞĞ»ĞºĞ¾Ğ³Ğ¾Ğ»ÑŒ'] ? `<span class="product-meta-tag">${p.alcohol||p['ĞĞ»ĞºĞ¾Ğ³Ğ¾Ğ»ÑŒ']}</span>` : ''}
        </div>
        <div class="product-footer">
          <div class="product-price">${Number(price).toLocaleString('ru')}<span class="currency"> AED</span></div>
          ${inStock ? `<div class="add-btn ${inCart ? 'in-cart' : ''}" onclick="quickAdd(event,'${id}')">${inCart ? 'âœ“' : '+'}</div>` : ''}
        </div>
      </div>
    </div>`;
  }).join('');
}

// â”€â”€ QUICK ADD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function quickAdd(e, id) {
  e.stopPropagation();
  const product = catalog.find(p => (p.id || p['ID']) == id);
  if (!product) return;
  const pid = product.id || product['ID'];
  if (cart[pid]) {
    cart[pid].qty++;
  } else {
    cart[pid] = { ...product, qty: 1 };
  }
  updateCartBadge();
  renderProducts();
  haptic('light');
}

// â”€â”€ OPEN PRODUCT MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openProduct(id) {
  const product = catalog.find(p => (p.id || p['ID']) == id);
  if (!product) return;
  currentProduct = product;
  currentQty = 1;
  
  const cat = product.category || product['ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ'] || '';
  const name = product.name || product['ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ'] || '';
  const price = product.price || product['Ğ¦ĞµĞ½Ğ°'] || 0;
  const inStock = product.in_stock !== undefined ? product.in_stock : true;
  const emoji = CATEGORY_EMOJI[cat] || 'ğŸ¶';
  
  document.getElementById('modalCategory').textContent = cat;
  document.getElementById('modalName').textContent = name;
  document.getElementById('modalCountry').textContent = product.country || product['Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°'] || '';
  document.getElementById('modalDesc').textContent = product.description || product['ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ'] || '';
  document.getElementById('modalPrice').innerHTML = `${Number(price).toLocaleString('ru')}<span class="curr"> AED</span>`;
  document.getElementById('modalQty').textContent = '1';
  document.getElementById('modalImgFallback').textContent = emoji;
  document.getElementById('modalImgFallback').style.display = 'block';
  document.getElementById('modalImg').style.display = 'none';
  
  const specs = document.getElementById('modalSpecs');
  specs.innerHTML = [
    product.volume || product['ĞĞ±ÑŠÑ‘Ğ¼'],
    product.alcohol || product['ĞĞ»ĞºĞ¾Ğ³Ğ¾Ğ»ÑŒ'],
  ].filter(Boolean).map(s => `<div class="modal-spec">${s}</div>`).join('');
  
  const addBtn = document.getElementById('modalAddBtn');
  if (inStock) {
    addBtn.className = 'modal-add-btn';
    addBtn.textContent = 'ğŸ›’ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ';
  } else {
    addBtn.className = 'modal-add-btn oos';
    addBtn.textContent = 'âŒ ĞĞµÑ‚ Ğ² Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸';
  }
  
  document.getElementById('modalOverlay').classList.add('open');
}

function closeModal(e) {
  if (e.target === document.getElementById('modalOverlay')) {
    document.getElementById('modalOverlay').classList.remove('open');
  }
}

function changeQty(delta) {
  currentQty = Math.max(1, currentQty + delta);
  document.getElementById('modalQty').textContent = currentQty;
}

function addToCartFromModal() {
  if (!currentProduct) return;
  const pid = currentProduct.id || currentProduct['ID'];
  if (cart[pid]) {
    cart[pid].qty += currentQty;
  } else {
    cart[pid] = { ...currentProduct, qty: currentQty };
  }
  document.getElementById('modalOverlay').classList.remove('open');
  updateCartBadge();
  renderProducts();
  haptic('medium');
  
  // Show cart
  setTimeout(openCart, 300);
}

// â”€â”€ CART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateCartBadge() {
  const total = Object.values(cart).reduce((s, i) => s + i.qty, 0);
  const badge = document.getElementById('cartBadge');
  badge.textContent = total;
  badge.className = 'cart-badge' + (total > 0 ? ' visible' : '');
}

function openCart() {
  renderCart();
  document.getElementById('cartOverlay').classList.add('open');
}

function closeCart() {
  document.getElementById('cartOverlay').classList.remove('open');
}

function closeCartOverlay(e) {
  if (e.target === document.getElementById('cartOverlay')) closeCart();
}

function renderCart() {
  const items = Object.values(cart);
  const content = document.getElementById('cartContent');
  
  if (!items.length) {
    content.innerHTML = `<div class="empty-cart">
      <div class="empty-cart-icon">ğŸ›’</div>
      <div class="empty-cart-text">ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° Ğ¿ÑƒÑÑ‚Ğ°</div>
      <div class="empty-cart-sub">Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‡Ñ‚Ğ¾-Ğ½Ğ¸Ğ±ÑƒĞ´ÑŒ Ğ¸Ğ· ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ°</div>
    </div>`;
    return;
  }
  
  const subtotal = items.reduce((s, i) => s + (i.price || i['Ğ¦ĞµĞ½Ğ°'] || 0) * i.qty, 0);
  const delivery = subtotal >= 500 ? 0 : 30;
  const total = subtotal + delivery;
  const emoji = (p) => CATEGORY_EMOJI[p.category || p['ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ']] || 'ğŸ¶';
  
  content.innerHTML = `
    <div class="cart-items">
      ${items.map(item => {
        const pid = item.id || item['ID'];
        const name = item.name || item['ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ'] || '';
        const price = item.price || item['Ğ¦ĞµĞ½Ğ°'] || 0;
        return `<div class="cart-item">
          <div class="cart-item-emoji">${emoji(item)}</div>
          <div class="cart-item-info">
            <div class="cart-item-name">${name}</div>
            <div class="cart-item-price">${(price * item.qty).toLocaleString('ru')} AED</div>
          </div>
          <div class="cart-item-qty">
            <div class="cart-qty-btn" onclick="cartQty('${pid}', -1)">âˆ’</div>
            <span>${item.qty}</span>
            <div class="cart-qty-btn" onclick="cartQty('${pid}', 1)">+</div>
          </div>
        </div>`;
      }).join('')}
    </div>
    
    <div class="form-section">
      <div class="form-label">ĞĞ´Ñ€ĞµÑ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸</div>
      <input class="form-input" id="addressInput" placeholder="Ğ£Ğ»Ğ¸Ñ†Ğ°, Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ, ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°...">
      <input class="form-input" id="notesInput" placeholder="ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ Ğº Ğ·Ğ°ĞºĞ°Ğ·Ñƒ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)">
    </div>
    
    <div class="form-section">
      <div class="form-label">Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹</div>
      <div class="payment-grid">
        ${PAYMENT_METHODS.map(pm => `
          <div class="payment-option ${pm.id === selectedPayment ? 'selected' : ''}" onclick="selectPayment('${pm.id}')">
            <div class="payment-option-icon">${pm.icon}</div>
            <div class="payment-option-label">${pm.label}</div>
          </div>
        `).join('')}
      </div>
    </div>
    
    <div class="cart-totals">
      <div class="cart-row"><span>Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ (${items.length})</span><span>${subtotal.toLocaleString('ru')} AED</span></div>
      <div class="cart-row"><span>Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°</span><span>${delivery === 0 ? 'ğŸ‰ Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾' : delivery + ' AED'}</span></div>
      <div class="cart-row total"><span>Ğ˜Ñ‚Ğ¾Ğ³Ğ¾</span><span class="val">${total.toLocaleString('ru')} AED</span></div>
    </div>
    
    <button class="checkout-btn" onclick="placeOrder()">
      âœ¨ ĞÑ„Ğ¾Ñ€Ğ¼Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ· â€” ${total.toLocaleString('ru')} AED
    </button>
  `;
}

function cartQty(id, delta) {
  if (!cart[id]) return;
  cart[id].qty += delta;
  if (cart[id].qty <= 0) delete cart[id];
  updateCartBadge();
  renderCart();
}

function selectPayment(id) {
  selectedPayment = id;
  renderCart();
}

// â”€â”€ PLACE ORDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function placeOrder() {
  const address = document.getElementById('addressInput')?.value.trim();
  if (!address) {
    document.getElementById('addressInput').style.borderColor = '#C0392B';
    document.getElementById('addressInput').placeholder = 'âš ï¸ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸';
    return;
  }
  
  const items = Object.values(cart);
  const subtotal = items.reduce((s, i) => s + (i.price || 0) * i.qty, 0);
  const delivery = subtotal >= 500 ? 0 : 30;
  const total = subtotal + delivery;
  const notes = document.getElementById('notesInput')?.value.trim();
  
  const orderData = {
    items: items.map(i => ({
      id: i.id, name: i.name || i['ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ'],
      price: i.price || i['Ğ¦ĞµĞ½Ğ°'], qty: i.qty
    })),
    total, address, notes,
    payment_method: selectedPayment,
    dest_lat: 25.2050 + (Math.random() - 0.5) * 0.02,
    dest_lng: 55.2700 + (Math.random() - 0.5) * 0.02,
  };
  
  // Send to Telegram bot
  if (tg) {
    tg.sendData(JSON.stringify({ action: 'place_order', ...orderData }));
  }
  
  // Also try API
  try {
    const res = await fetch(`${API_BASE}/orders`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(orderData)
    });
    const data = await res.json();
    lastOrderId = data.order_id;
  } catch {
    lastOrderId = 'ORD' + Date.now();
  }
  
  // Clear cart
  cart = {};
  updateCartBadge();
  closeCart();
  
  // Show success
  document.getElementById('successOrderId').textContent = `ĞĞ¾Ğ¼ĞµÑ€ Ğ·Ğ°ĞºĞ°Ğ·Ğ°: ${lastOrderId}`;
  document.getElementById('successScreen').classList.add('show');
  haptic('success');
}

function openTracking() {
  if (lastOrderId) {
    const url = `${window.location.origin}/tracking?order_id=${lastOrderId}`;
    if (tg) tg.openLink(url);
    else window.open(url, '_blank');
  }
}

// â”€â”€ HAPTIC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function haptic(type) {
  if (tg?.HapticFeedback) {
    if (type === 'light') tg.HapticFeedback.impactOccurred('light');
    else if (type === 'medium') tg.HapticFeedback.impactOccurred('medium');
    else if (type === 'success') tg.HapticFeedback.notificationOccurred('success');
  }
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
loadCatalog();
</script>
</body>
</html>
